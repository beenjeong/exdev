<meta charset="utf-8">
<script type="text/javascript">
	var <@popupId> = {
		 close : function(returnData) {
			if(isEmpty(returnData)) returnData = {};
			C_POP.close(returnData);
		 }
		,openPopup : function() {
			C_POP.open('popup_samplePopup2', {}, function(retData) {
				dalert(retData);
			});
		 }
		,getItems : (loc) => {

			const requestParm = {};
			const updateItems = $("#"+loc+" input:not([type='radio'])");
			
			const valuesArray = updateItems.map(function() {				
				if( this.name == "CHATROOM_ID" && this.value == "" ) this.value = C_COM.makeUniqueId();
			    return { name: this.name, value: "" + $(this).val() };
			}).get();

			valuesArray.forEach(function(item) {
				requestParm[item.name] = item.value;
			});
			
			const radioNames = ['OPENROOM_YN'];
			radioNames.forEach( radioName => {
				requestParm[radioName] = <@popupId>.fnRadioCheckValue(loc,radioName);
			})

			return requestParm;
			
		}
		,fnRadioCheckValue : (loc, name , pValue) => {

			const radioButtons = $("#"+loc+" input[name='"+name+"']");
			if( pValue ){
			 
				const theRadioBtn = radioButtons.filter("[value='"+pValue+"']");
				 theRadioBtn.prop('checked',true);
			}else{
			
				const selectedValue = radioButtons.filter(":checked").val();
				return selectedValue;
			 }
		}
		,setHandler : () => {
			
			$('button[name="<@popupId>_save"]').on('click', function (e) {
				const loc = $(".info_wrap").attr("id");
				const queryId = "chat.insertChatRoom";
				<@popupId>.insertChatRoom(loc, queryId);
			})
		}
		,insertChatRoom : (loc, queryId) => {

			var parm = {
					 queryId 		: queryId
					,requestParm	: <@popupId>.getItems(loc)
			}

			C_COM.requestQuery(parm, function(resultData) {
				
				if( resultData.state == 'S'){
					//<@pageId>.searchList();
					console.log("코드 저장 성공");
				}
			});			
		} 
	
	}
	// Popup Load가 완료된후 실행 된다.
	C_POP.onLoadPopup("<@popupId>", function(data) {
		<@popupId>.setHandler();
		dalert(data);
	});
</script>
	<!-- 대화방 등록하기 팝업 -->
<div class="modal_wrap">
	<div class="modal" style="width:570px;height:750px;">
		<div class="modal_header">
			<strong class="tit">우리대화합시다.</strong>
			<button type="button" class="btn_close" onclick="<@popupId>.close()"><span class="sp">팝업 닫기</span></button>
		</div>
		<div class="modal_body">
			<div style="overflow:scroll; height:550px;">
				<p>
					1111법인사업자에 한해 고객등록 및 씨오 리포트 생성이 가능합니다.
					KODATA 기업검색 정보가 없는 기업은 법인등기부등본 조회를 통해 해당 기업 정보와 대표자 정보를<br>
					확인하고, 관리고객으로 직접 등록합니다.
				</p>
				<p>
					법인사업자에 한해 고객등록 및 씨오 리포트 생성이 가능합니다.
					KODATA 기업검색 정보가 없는 기업은 법인등기부등본 조회를 통해 해당 기업 정보와 대표자 정보를<br>
					확인하고, 관리고객으로 직접 등록합니다.
				</p>
				<p>
					법인사업자에 한해 고객등록 및 씨오 리포트 생성이 가능합니다.
					KODATA 기업검색 정보가 없는 기업은 법인등기부등본 조회를 통해 해당 기업 정보와 대표자 정보를<br>
					확인하고, 관리고객으로 직접 등록합니다.
				</p>
				<p>
					법인사업자에 한해 고객등록 및 씨오 리포트 생성이 가능합니다.
					KODATA 기업검색 정보가 없는 기업은 법인등기부등본 조회를 통해 해당 기업 정보와 대표자 정보를<br>
					확인하고, 관리고객으로 직접 등록합니다.
				</p>
				<p>
					법인사업자에 한해 고객등록 및 씨오 리포트 생성이 가능합니다.
					KODATA 기업검색 정보가 없는 기업은 법인등기부등본 조회를 통해 해당 기업 정보와 대표자 정보를<br>
					확인하고, 관리고객으로 직접 등록합니다.
				</p>
				<p>
					xxxx법인사업자에 한해 고객등록 및 씨오 리포트 생성이 가능합니다.
					KODATA 기업검색 정보가 없는 기업은 법인등기부등본 조회를 통해 해당 기업 정보와 대표자 정보를<br>
					확인하고, 관리고객으로 직접 등록합니다.
				</p>
			</div>
		</div>
			<div>
				<dl class="info_wrap">
					<dt>메세지</dt>
					<dd><input type="text" name="CHATROOM_NAME" style="width:100%"></dd>
				</dl>
			</div>
		<div class="modal_footer">
			<button type="button" class="btn select fl" name="<@popupId>_save"	>메세지전송</button>
			<button type="button" class="btn" onclick="<@popupId>.close()"	>닫기</a></button>
		</div>
	</div>
</div>