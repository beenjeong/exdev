<meta charset="utf-8">
<script type="text/javascript">
	var <@popupId> = {
         userIndex : 0      
        ,userArr : []
        ,requestParm : {}
		,memberSearchPopup : function() {

            console.log("======= memberSearchPopup 2 =======");
	        C_POP.open('popup_userSearchPopup', {}, function(retData) {
	            console.log("======= memberSearchPopup 3 =======");
	            console.log(retData);
	            <@popupId>.addMember(retData);
	        });
	     }
        ,addMember : function(retData) {
            
            for (let obj of retData) {
                console.log("obj.index =>"+obj.index);
                console.log("obj.user_id =>"+obj.user_id);
                console.log("obj.user_nm =>"+obj.user_nm);
                console.log("obj.user_desc =>"+obj.user_desc);
                console.log("obj.e_mail =>"+obj.e_mail);
                

                <@popupId>.userArr.push(obj.user_id);
                
                let user = obj.user_nm+"/"+obj.user_desc+"/"+obj.user_id+"/"+obj.e_mail;
                
                let htmlData = '';
                /*
                htmlData += '<div id="approvalUser'+ <@popupId>.userIndex +'" class="filebox">';
                htmlData += '   <p class="name">' + user + '</p>';
                htmlData += '   <button onclick="<@pageId>.deleteUser(' + <@popupId>.userIndex + ');">삭제</button>';
                htmlData += '</div>';
                */

                htmlData += '<li id="approvalUser'+ <@popupId>.userIndex +'" >';
                htmlData += '    <button class="stateBtn toggle active">결재</button>';
                htmlData += '    <button class="stateBtn toggle">합의</button>';
                htmlData += '    <button class="stateBtn toggle">통보</button>';
                htmlData += '    <span class="txt">' + user + '</span>';
                htmlData += '    <button class="pay_close" onclick="<@pageId>.deleteUser(' + <@popupId>.userIndex + ');">삭제</button>';
                htmlData += '</li>';
                
                $('#<@popupId> .approver_list').append(htmlData);
                <@popupId>.userIndex++;
            }
         }
        ,deleteUser : function(num) {/* 결재자 삭제 */
            $("#<@popupId> #approvalUser" + num).remove();
            <@popupId>.userArr[num].is_delete = true;
         }
		,close : function() {
			console.log("======= 자식창 C_POP.close =======");
		
		 }
	}
	// Popup Load가 완료된후 실행 된다.
	C_POP.onLoadPopup("<@popupId>", function(data) {

		
	});
	
	
</script>

    <!-- 결재 상신 팝업 -->
    <div class="modal_wrap" id="modal-ex01">
        <div class="modal" style="width:600px;height:450px;">
            <div class="modal_header">
                <strong class="tit">결재 상신</strong>
                <button type="button" class="btn_close"><span class="sp">팝업 닫기</span></button>
            </div>
            <div class="modal_body">
                <dl class="info_wrap pay">
                    <dt>제목</dt>
                    <dd><input type="text" style="width:100%"></dd>
                    <dt>결재자 검색</dt>
                    <dd>
                        <div class="search_inputWrap" style="width:100%">
                            <input type="search" name="">
                              <button class="search_btn">
                                  <a href="javascript:void(0);" onclick="<@popupId>.memberSearchPopup();"><i class="icon_search"></i></a>
                              </button>
                        </div>
                    </dd>
                    <dt>결재자 리스트</dt>
                    <dd class="mb0" style="height:120px;overflow-y:auto;">
                        <div class="approver_list_wrap">
                            <ul class="approver_list">
                                <li>
                                    <span class="stateBtn drafter">기 안 자</span>
                                    <span class="txt">김기안 / 경영 지원 그룹 / 대리 / abcx@explan.co.kr</span>
                                </li>
                                <li>
                                    <button class="stateBtn toggle active">결재</button>
                                    <button class="stateBtn toggle">합의</button>
                                    <button class="stateBtn toggle">통보</button>
                                    <span class="txt">위성열 / 경영 지원 그룹 / 부장 / abcd@explan.co.kr</span>
                                    <button class="pay_close">삭제</button>
                                </li>
                            </ul>
                        </div>
                    </dd>
                    <dt>상신 내용</dt>
                    <dd style="height:70px;"><textarea row=3 style="width:100%"></textarea></dd>
                </dl>
            </div>
            <div class="modal_footer">
                <button type="button" class="btn select">결재 상신</button>
                <button type="button" class="btn select">보류함</button>
                <button type="button" class="btn close">취소</button>
            </div>
        </div>
    </div>




