<meta charset="utf-8">
<script type="text/javascript">
    var <@pageId> = {
             approvalList : [] 
            ,searchApproval : () => {
                    let requestUser = $("#<@pageId>requestUser").val();
                    let parm = {
                         queryId        : "approval.getApproval"
                        ,requestParm    : {requestUser: requestUser}
                    }
                    C_COM.requestQuery(parm, function(resultData) {
                        console.log( resultData.data);
                        <@pageId>.approvalList = resultData.data;
                        let rparm = {
                                 targetId   : "tableId"
                                ,list       : resultData.data
                            }
                        C_COM.renderHtml("<@pageId>", rparm);
                        
                    });            
            }
            ,apprDtlPop : function(uuid) {    
            	console.log("======= apprDtlPop uuid =======>"+uuid);
            	let requestParm = {}
            	requestParm["uuid"] = uuid;
                C_POP.open('popup_apprDtlPopup', requestParm, function() {
                	//console.log("======= 부모창 retData =======");
                });
             }
            ,apprReqPopup : function() {    
                console.log("======= apprReqPopup =======>");
                let requestParm = {}
                C_POP.open('popup_apprReqPopup', requestParm, function() {
                    //console.log("======= 부모창 retData =======");
                });
                
             }
    }
    // Page Load가 완료된후 실행 된다.
    C_PM.onLoadPage("<@pageId>", function() {
        <@pageId>.searchApproval();

        //조회 버튼 클릭      
        $('#<@pageId>_apprReqPopupBtn').on('click', function (e) {
            <@pageId>.apprReqPopup();
        })
        
        
    });
    // History back으로 이동해왔을 경우 이루틴이 실행된다.
    C_HM.onReturn("<@pageId>", function(pageId, data) {

    });
</script>
        <div class="cont_wrap">
            <div class="cont_top">
                <h2><i class="icon_bullet"></i>상신함</h2>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button id='<@pageId>_apprReqPopupBtn' type="button" class="btn select" >결재 상신</button>
                
                
            </div>
            <div class="sec_scroll">
                <section class="sec_wrap">
                    <div class="cont_box">
                        <div class="clearFix">
                            <h3 class="fl lh33">상신 목록</h3>
                            <div class="select_box fr" style="width:132px">
                                <button type="button" class="btn radio"><span>50개 보기</span></button>
                                <ul class="select_lst">
                                    <li>
                                        <input name="number" id="num01" type="radio" value="">
                                        <label for="num01">50개 보기<i class="icon_check"></i></label>
                                    </li>
                                    <li>
                                        <input name="number" id="num02" type="radio" value="">
                                        <label for="num02">30개 보기<i class="icon_check"></i></label>
                                    </li>
                                    <li>
                                        <input name="number" id="num03" type="radio" value="">
                                        <label for="num03">10개 보기<i class="icon_check"></i></label>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- 테이블 -->
                        <div class="tbl01 col mt15">
                            <table>
                                <caption>표 캡션</caption>
                                <colgroup>
                                    <col style="width:50px;"/>
                                    <col style="width:130px;"/>
                                    <col style="width:*"/>
                                    <col style="width:100px;"/>
                                </colgroup>
                                <thead>
                                    <tr>
                                        <th scope="col">Num</th>
                                        <th scope="col">상신일</th>
                                        <th scope="col">제목</th>
                                        <th scope="col">상태</th>
                                    </tr>
                                </thead>
                                <tbody id="tableId">
                                </tbody>
                                <script type="text/x-jsrender" id="tableId_template">    
                                    {{for list}}
                                        <tr id="trId_{{:#index}}">
                                            <td id='index'           value='{{:#index}}'         >{{:#index}}    </td>
                                            <td id='APPROVAL_DATE1'  value='{{:APPROVAL_DATE1}}'  >{{:APPROVAL_DATE1}}</td>
                                            <td id='TITLE'           value='{{:TITLE}}'         class="tl"><a href="javascript:void(0);" onclick="<@pageId>.apprDtlPop('{{:UUID}}');">{{:TITLE}}</a></td>
                                            <td id='STATE'           value='{{:STATE}}'          ><span class="state paying">{{:STATE}}</span></td>
                                        </tr>
                                    {{/for}}
                                </script>
	                            <script type="text/x-jsrender" id="tableId_noData_template">    
                                   <tr>    
                                       <td colspan=4>자료가 없습니다.</td>    
                                   </tr>
                                </script>
                            </table>
                        </div>
                        <!-- paging -->
                        <div class="paging">
                            <a href="#none" class="btn_pg_first disabled">첫번째 페이지</a>
                            <a href="#none" class="btn_pg_prev disabled">이전 페이지</a>
                            <strong title="현재 페이지">1</strong>
                            <a href="#none">2</a>
                            <a href="#none">3</a>
                            <a href="#none">4</a>
                            <a href="#none">5</a>
                            <a href="#none" class="btn_pg_next">다음 페이지</a>
                            <a href="#none" class="btn_pg_last">마지막 페이지</a>
                        </div>
                    </div>
                </section>
            </div>
        </div>