<meta charset="utf-8">
<script type="text/javascript">
    var <@pageId> = {
             approvalList : [] 
            ,searchApproval : () => {
                    let requestUser = $("#<@pageId>requestUser").val();
                    let parm = {
                         queryId        : "Sample.getApproval"
                        ,requestParm    : {requestUser: requestUser}
                    }
                    C_COM.requestQuery(parm, function(resultData) {
                        console.log( resultData.data);
                        <@pageId>.approvalList = resultData.data;
                        let rparm = {
                                 targetId   : "tableId"
                                ,list       : resultData.data
                            }
                        C_COM.renderHtml("<@pageId>", rparm);
                        
                    });            
            }  
    }
    // Page Load가 완료된후 실행 된다.
    C_PM.onLoadPage("<@pageId>", function() {
    	<@pageId>.searchApproval();

        //조회 버튼 클릭      
        $('#<@pageId>_search').on('click', function (e) {
            <@pageId>.searchApproval();
        })
    	
    });
    // History back으로 이동해왔을 경우 이루틴이 실행된다.
    C_HM.onReturn("<@pageId>", function(pageId, data) {

    });
</script>
<div class="cont_wrap">


            <div class="cont_top">
                <h2><i class="icon_bullet"></i>상신목록</h2>
            </div>
            <section class="sec_wrap">
                <!-- search area -->
                <div class="search_area mt0">
                    <!-- 멀티 선택 -->
                    <div class="fl">
                        <div class="search_inputWrap">
                            USER_ID :   <input type='text'   id='<@pageId>requestUser' name='<@pageId>requestUser' value='windrider'> 
                        </div>
                    </div>
                    <button id='<@pageId>_search'  >조회</button>

                </div>
                <!-- 테이블 -->
                <div class="tbl01 col tbl_scroll">
                    <table>
                        <caption>상신 목록</caption>
                        <colgroup>
                            <col style="width:40px;"/>
                            <col style="width:80px;"/>
                            <col style="width:80px;"/>
                            <col style="width:80px;"/>
                        </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">Num</th>
                                <th scope="col">상신일</th>
                                <th scope="col">제목</th>
                                <th scope="col">상태</th>
                            </tr>
                        </thead>
                        
					    <tbody id="tableId">
					    </tbody>
					    <script type="text/x-jsrender" id="tableId_template">    
                            {{for list}}
                                <tr id="trId_{{:#index}}">
                                    <td id='index'           value='{{:#index}}'         >{{:#index}}    </td>
                                    <td id='APPROVAL_DATE'   value='{{:APPROVAL_DATE}}'  >{{:APPROVAL_DATE}}</td>
                                    <td id='TITLE'           value='{{:TITLE}}'          >{{:TITLE}}</td>
                                    <td id='STATE'           value='{{:STATE}}'          >{{:STATE}}</td>
                                </tr>
                            {{/for}}
                        </script>
						<script type="text/x-jsrender" id="tableId_noData_template">    
                           <tr>    
                               <td colspan=4>자료가 없습니다.</td>    
                           </tr>
                        </script>
                    </table>
                </div>
                
            </section>
</div>