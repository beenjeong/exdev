<meta charset="utf-8">
<script type="text/javascript"> 
var <@pageId> = {
		 selectedCheck :{ "grpCodeList": [],"normalCodeList": [] }
		,getItems : (loc) => {
				const requestParm = {};
				const updateItems = $("#"+loc+" input:not([type='radio'])");
				
				const valuesArray = updateItems.map(function() {
				    return { name: this.name, value: ""+$(this).val() };
				}).get();
				
				valuesArray.forEach(function(item) {
					requestParm[item.name] = item.value;
				});

				return requestParm;
				
		}
		,showObject : (obj, loc) => {
			//debugger;
			var keys = Object.keys(obj);
		    for (var i=0; i<keys.length; i++) {
		    	var key = keys[i];
		    	$("#<@pageId>_" + key).html(obj[key]);
		    }
		}
		,showList : (loc) => {
			dalert(loc);
		}
		,selectQueryGroup : function(pmt) {
			var parm = {
				queryGroup : [
					{
						 queryId 			: "financialanalysis.getBuyerDetail"
						,requestParm		: pmt
					}
					,
					{
						 queryId 			: "financialanalysis.getBasis01"
						,requestParm		: pmt
					}
					,
					{
						 queryId 			: "financialanalysis.getBasis02"
						,requestParm	: pmt
					}
					,
					{
						 queryId 			: "financialanalysis.getFinAnalExecutive"
						,requestParm	: pmt
					}

					,
					{
						 queryId 			: "financialanalysis.getFinAnalRate"
						,requestParm	: pmt
					}
					,
					{
						 queryId 			: "financialanalysis.getFinAnalResult"
						,requestParm	: pmt
					}
					,
					{
						 queryId 			: "financialanalysis.getFinAnalStatusDtl"
						,requestParm	: pmt
					}
					,
					{
						 queryId 			: "financialanalysis.getFinAnalYear"
						,requestParm	: pmt
					}
					,
					{
						 queryId 			: "financialanalysis.getFinAnalStockholder"
						,requestParm	: pmt
					}
				]
			}
			C_COM.requestQuery(parm, function(resultData) {
				//debugger;
				//console.log("resultData====>",resultData);
				//dalert(resultData);
				<@pageId>.showObject(resultData.data['financialanalysis.getBuyerDetail'][0],'');
				<@pageId>.showObject(resultData.data['financialanalysis.getBasis01'][0],'');
			});
		 }
		,goPage : (pageId,rowId) => {

			const $tds = $(`[name='<@pageId>_tr_${rowId}']`)
			const jsonObject = {};

			jsonObject['BOARD_MST_ID'] = $("#BOARD_MST_ID").val();
			
			$tds.children("td").each(function() {
				
			    const id = this.id;
			    const value = $(this).text().trim();
				if( id )
			    	jsonObject[id] = value;
			});

			C_PM.movePage( pageId.trim(), jsonObject );
			
		}
		,setHandler : () => {
			//chat room row click
	        $("#chatRoomList").on('click', 'tr', function () {
	            let requestParm = {}
	            const rowId = $(this)[0].id;
	            if (rowId) {
	            	$($("#chatRoomList>#"+rowId+" td")).each( (idx,td) => {
        				const name 	= td.getAttribute("id");
        				const value = td.getAttribute("value");
        				requestParm[name] = value;
						$("[name='"+name+"']").val(value);
	            	})
	            }
    			<@pageId>.enterChatRoomPopup(requestParm);

	        })


   			$('#<@pageId>_search').on('click', function (e) {
   				<@pageId>.searchList();
   			})
   				
   			$('button[name="<@pageId>_insert"]').on('click', function (e) {
   				const loc = $(this).siblings(".item-box").attr("id");
   				const grp = loc.indexOf("grp") > -1 ? "GRP_" : "" ;
   					
   				<@pageId>.itemReset(loc,true,grp);
   			})
   				
   			$('button[name="<@pageId>_save"]').on('click', function (e) {

   				const loc =$(this).parents(".item-box").attr("id"); 
   				const queryId = loc.indexOf("grp") > -1 ? "system.updateGrpCode" :  "system.updateCode" ;
   				<@pageId>.updateCode(loc, queryId);
   			})
   				
   			$('button[name="<@pageId>_delete"]').on('click', function (e) {
   				
   				const loc = $(this).siblings(".item-box").attr("id");
   					
   				if(<@pageId>.validation(loc,"deleteCode")  == false)return;
   					
   				const queryId	= loc.indexOf("grp") > -1 ? "system.deleteGrpCode" : "system.deleteCode" ;
   				let		keyObj 	= loc.indexOf("grp") > -1 ? {"GRP_CODE_ID":""} : {"GRP_CODE_ID":"","CODE_ID":""} ;
				const gubun 	= loc.indexOf("grp") > -1 ? "grpCodeList" : "normalCodeList" ;
   		 		<@pageId>.selectedCheck[gubun].forEach( item =>{

   		 			let grpCodeId 	= "";
   					let codeId 		= "";	
		 			if( loc.indexOf("grp") == -1 ){
   		 					
		 				grpCodeId	= item.split("||")[0];
   		 				codeId 		= item.split("||")[1];
	   					keyObj["GRP_CODE_ID"] = grpCodeId;
	   					keyObj["CODE_ID"] = codeId;
	   		 				
   		 			}else{
   		 					
	   					keyObj["GRP_CODE_ID"] = item;
   		 			}
   						<@pageId>.deleteCode(queryId, keyObj);
   		 		});
   			}) 
   				
   			$('button[name="<@pageId>_reset"]').on('click', function(e){

   				const loc =$(this).parents(".item-box").attr("id");
   				const grp = loc.indexOf("grp") > -1 ? "GRP_" : "" ;
   				<@pageId>.itemReset(loc,true,grp);
   			})
   				
   			$("button[name='<@pageId>_close']").on('click', function(e){

   				const loc =$(this).parents(".item-box").attr("id");
   				<@pageId>.itemReset(loc,false);
   			}) 
   				
		}
		
 		,setEachColumnValue : (loc, arr ,grp) => {

			const name 	= arr[0];
			const value = arr[1];

			if( name == "USE_YN" ){
				
				<@pageId>.fnRadioCheckValue(loc, grp+'USE_YN',value);
			
			}else if( name == "DEL_YN" ){
				
				<@pageId>.fnRadioCheckValue(loc,  grp+'DEL_YN',value);
			
			}else{
			
				$("#"+loc+" input:not([type='checkbox'])").each((idx,obj)=>{

					if(obj.name == grp+name && obj.name != 'ckbox'){
						obj.value = value;
					}
				})
			}
		}
		,fnRadioCheckValue : (loc, name , pValue) => {

				const radioButtons = $("#"+loc+" input[name='"+name+"']");
				if( pValue ){
				 
					const theRadioBtn = radioButtons.filter("[value='"+pValue+"']");
					 theRadioBtn.prop('checked',true);
				}else{
				
					const selectedValue = radioButtons.filter(":checked").val();
					return selectedValue;
				 }
		}
		, createBoardPopup : function() {
			const requestParm = {};
			requestParm['BOARD_MST_ID'] = $("#BOARD_MST_ID").val();
			<@pageId>.getSearchItems(requestParm);

			C_POP.open('popup_board_createBoardPopup', requestParm, function(retData) {
				if(retData.refresh == 'Y'){
					<@pageId>.searchList();
				}
			});
		 }
}

// Page Load가 완료된후 실행 된다.
C_PM.onLoadPage("<@pageId>", function(parm) {
	dalert(parm.BUYER_ID);
	<@pageId>.selectQueryGroup(parm);
});
	
// History back으로 이동해왔을 경우 이루틴이 실행된다.
C_HM.onReturn("<@pageId>", function(pageId, data) {

});



</script>

</head>
		<div class="cont_wrap" style="height:1500px">
			<div class="cont_top">
				<h2><i class="icon_bullet"></i>기업 개요</h2>
			</div>

			<section class="sec_wrap list" style="height:calc(100% - 43px);">
				<!-- 테이블 -->
				<div class="tbl01 col" style="max-height:506px;">
					<div class="tbl01 col">
						<table>
							<colgroup>
								<col style="width:15%;"/>
								<col style="width:35%;"/>
								<col style="width:15%;"/>
								<col style="width:*;"/>
							</colgroup>
							
					       <tbody>
					       	<tr>
								<td colspan="4" style="text-align:left"><i class="icon_bullet"></i>기업일반</td>
							</tr>
					       	<tr>
                                <td style="text-align:left;" bgcolor="#E9E9E9">기업명</td>
                                <td style="text-align:left" id="<@pageId>_COMPANY_NM"></td>
                                <td style="text-align:left" bgcolor="#E9E9E9">설립일자</td>
                                <td style="text-align:left" id="<@pageId>_ESTABLISHMENT_DATE"></td>
							</tr>
					       	<tr>
                                <td style="text-align:left" bgcolor="#E9E9E9">대표자명</td>
                                <td style="text-align:left" id="<@pageId>_OWNER_NM"></td>
                                <td style="text-align:left" bgcolor="#E9E9E9">대표자 생년월일(나이)</td>
                                <td style="text-align:left" id="<@pageId>_OWNER_BIRTHDAY"></td>
							</tr>
					       	<tr>
                                <td style="text-align:left" bgcolor="#E9E9E9">기업형태</td>
                                <td style="text-align:left" id="<@pageId>_COMPANY_TYPE"></td>
                                <td style="text-align:left" bgcolor="#E9E9E9">결산월</td>
                                <td style="text-align:left" id="<@pageId>_SETTLEMENT_MONTH"></td>
							</tr>
					       	<tr>
                                <td style="text-align:left" bgcolor="#E9E9E9">상시근로자수</td>
                                <td style="text-align:left" colspan="3" id="<@pageId>_EMPLOYEE_CNT"></td>
							</tr>
					       	<tr>
                                <td style="text-align:left" bgcolor="#E9E9E9">업종</td>
                                <td style="text-align:left" colspan="3" id="<@pageId>_BUSINESS_TYPE"></td>
							</tr>
					       	<tr>
                                <td style="text-align:left" bgcolor="#E9E9E9">주소(도로명)</td>
                                <td style="text-align:left" colspan="3" id="<@pageId>_ADDRESS"></td>
							</tr>
					       	<tr>
                                <td style="text-align:left" bgcolor="#E9E9E9">기업인증현황</td>
                                <td style="text-align:left" colspan="3" id="<@pageId>_COMPANY_CERT_STATUS"></td>
							</tr>
					       	<tr>
                                <td style="text-align:left" bgcolor="#E9E9E9">산업재산권현황</td>
                                <td style="text-align:left" colspan="3" id="<@pageId>_INDUSTRY_ESTATE_STATUS"></td>
							</tr>
					       </tbody>
						</table>
					</div>
				</div>
				<br>
				<div class="tbl01 col" style="max-height:506px;">
					<div class="tbl01 col">
						<table>
							<colgroup>
								<col style="width:16%;"/>
								<col style="width:16%;"/>
								<col style="width:16%;"/>
								<col style="width:16%;"/>
								<col style="width:16%;"/>
								<col style="width:*;"/>
							</colgroup>							
					       <tbody>
					       	<tr>
								<td colspan="4" style="text-align:left"><i class="icon_bullet"></i>자본금 및 주식 발행사항</td>
							</tr>
					       	<tr style="text-align:center;" bgcolor="#E9E9E9">
                                <td>자본금</td>
                                <td>발행주식 합계</td>
                                <td>보통주</td>
                                <td>우선주</td>
                                <td>상환전환우선주</td>
                                <td>1주의 금액</td>
							</tr>
					       	<tr style="text-align:center;">
                                <td id="<@pageId>_CAPITAL"></td>
                                <td id="<@pageId>_STOCK"></td>
                                <td id="<@pageId>_ORDINARY"></td>
                                <td id="<@pageId>_PREFERRED_STOCK"></td>
                                <td id="<@pageId>_SANGWHAN_CONV_PRE_STOCK"></td>
                                <td id="<@pageId>_ONE_STOCK_PRICE"></td>
							</tr>
					       </tbody>
						</table>
					</div>
				</div>
				<br>
				<div class="tbl01 col" style="max-height:506px;">
					<div class="tbl01 col">
						<table>
							<colgroup>
								<col style="width:10%;"/>
								<col style="width:*;"/>
							</colgroup>							
					       <tbody>
					       	<tr>
								<td colspan="4" style="text-align:left"><i class="icon_bullet"></i>주요 사업목적</td>
							</tr>
					       	<tr style="text-align:center;" bgcolor="#E9E9E9">
                                <td bgcolor="#E9E9E9">사업목적</td>
                                <td>
                                	<table>
                                		<tr>
                                			<td></td>
                                		</tr>
                                	</table>
                                </td>
							</tr>
					       </tbody>
						</table>
					</div>
				</div>
				<br>
				<div class="tbl01 col" style="max-height:506px;">
					<div class="tbl01 col">
						<table>
							<colgroup>
								<col style="width:10%;"/>
								<col style="width:*;"/>
							</colgroup>							
					       <tbody>
					       	<tr>
								<td colspan="4" style="text-align:left"><i class="icon_bullet"></i>주요 사업목적</td>
							</tr>
					       	<tr style="text-align:center;" bgcolor="#E9E9E9">
                                <td bgcolor="#E9E9E9">사업목적</td>
                                <td>
                                	<table>
                                		<tr>
                                			<td></td>
                                		</tr>
                                	</table>
                                </td>
							</tr>
					       </tbody>
						</table>
					</div>
				</div>
			</section>

		</div>
