<meta charset="utf-8">
<script type="text/javascript">
    var <@compId> = {
             searchedRows : [] // 페이지
            ,pageInit : () => {
                
                // 오늘날짜 세팅
                let date = new Date();
                let today = date.getFullYear() +
                                  '-' + ( (date.getMonth()+1) <= 9 ? "0" + (date.getMonth()+1) : (date.getMonth()+1) )+
                                  '-' + ( (date.getDate()) <= 9 ? "0" + (date.getDate()) : (date.getDate()) );

                console.log("=== today["+today+"] ===>");
                
                
                $('#<@compId>_dateStart').val(today);
                $('#<@compId>_dateEnd').val(today);
                
                // 권역
                var regionList = C_COM.getCodeList("STORE_REGION");
                
                var selectBoxRegionList = { 
                     defaultItem    : ["ALL", "전체"] 
                    ,data : regionList
                    ,targetId : "<@compId>_selectBoxRegion" 
                }
                C_UICOM.makeSelectBox(selectBoxRegionList, "single");
                
                // 슈퍼바이저
                var supervisorList = C_COM.getCodeList("SUPERVISOR");
                
                var selectBoxSupervisorList = {

                     defaultItem    : ["ALL", "전체"]
                    ,data : supervisorList
                    ,targetId : "<@compId>_selectBoxSupervisor" 
                }
                C_UICOM.makeSelectBox(selectBoxSupervisorList, "single");
                
                _setSearchListCnt("<@compId>_pagingChunk" );
                
            }
            ,searchList : () => {
                
                console.log("searchList");
                
                let dateStart = $('#<@compId>_dateStart').val();
                let dateEnd   = $('#<@compId>_dateEnd').val();
                
                if ( dateStart.length < 1) {
                    C_POP.alert("개업시작일을 입력해 주세요.");
                    $("#<@compId>_dateStart").focus();
                    return false;
                }

                if ( dateEnd.length < 1) {
                    C_POP.alert("개업 종료일을 입력해 주세요.");
                    $("#<@compId>_dateEnd").focus();
                    return false;
                }

                if( Number(dateStart.replace(/-/gi,"")) > Number(dateEnd.replace(/-/gi,"")) ){
                    C_POP.alert("시작일이 종료일보다 클 수 없습니다.");
                    $("#<@compId>_dateStart").focus();
                    return false;
                }
                
                var region = C_UICOM.getData("<@compId>_selectBoxRegion");
                var supervisor = C_UICOM.getData("<@compId>_selectBoxSupervisor");
                
                console.log("dateStart["+dateStart+"]   dateEnd["+dateEnd+"]   ");
                
                let requestParm = {};
                requestParm["spCstmId"]   = "starasset";
                requestParm["dateStart"]  = dateStart;
                requestParm["dateEnd"]    = dateEnd;
                requestParm["region"]     = region;
                requestParm["supervisor"] = supervisor;
                
                const listRange = C_UICOM.getData("<@compId>_pagingChunk");
                console.log("tab5  listRange["+listRange+"]    ");
                
                // 페이징 처리 초기화
                C_PAGING.create({
                     pageId             : "<@compId>"
                    ,listDomId          : "<@compId>_tableId"
                    ,pagingDomId        : "<@compId>_pageDiv"
                    ,totalCntDomId      : "<@compId>_totalCnt"
                    ,queryId            : "dashboardCorPerformance.getStorePage"
                    ,listRange          : Number(listRange)
                    ,pageRange          : 10
                    // <@pageId>.setSearchParm function에서 반환하는 json object값을 Query Parameter로 사용한다.
                    ,parmFn             : function() {
                        let parm = requestParm
                        return  parm;
                     }
                    // 페이지를 클릭 했을때 처리가 필요하면 아래에 정의 함
                    ,onPageClickCallback: function(data) {

                     }
                    // 검색해온 List를 수정한다.
                    ,makeListFn         : function(list) {
                        //<@pageId>.searchedRows = list; 
                     }
                });
                /* 가맹점 리스트및 현황 TAB    가맹점 리스트및 현황 TAB    가맹점 리스트및 현황 TAB    가맹점 리스트및 현황 TAB    */
            }
            ,setHandler : () => {
                
                $("#<@compId>_pagingChunk"  ).off().on('change',() =><@compId>.searchList(""));
                
                $("#<@compId>_searchBtn").click( () =>{
                    console.log(" _searchBtn 클릭");
                    <@compId>.searchList();
                })
            }
    }
    // Component Load가 완료된후 실행 된다.
    C_COMP.onLoadComp("<@compId>", function(data) {
        <@compId>.pageInit();
        <@compId>.setHandler();
    });
</script>
<div class="container">
     <div class="cont_wrap lnb_none">
         <div class="cont_top">
             <h2><i class="icon_bullet"></i>가맹점 리스트및 현황</h2>
         </div>
         <div class="sec_scroll">
             <section class="sec_wrap">
                 <div class="cont_box">
                     <!-- search area --> 
                     <div class="search_area">
                         <div class="calendar_wrap">
                             <div class="calendar_wrap fl" id="<@compId>_showDateStart" >
                                 <input type="text" class="datepicker" id="<@compId>_dateStart" style="width:150px"> ~ 
                             </div>
                             <div class="calendar_wrap fl" id="<@popupId>_showDateEnd" >
                                 <input type="text" class="datepicker" id="<@compId>_dateEnd" style="width:150px">
                             </div>
                             <div class="select_box fl" style="width:132px">
                                  <div id="<@compId>_selectBoxRegion" style="width:132px"></div>
                             </div>
                             <div class="select_box fl" style="width:132px">
                                  <div id="<@compId>_selectBoxSupervisor" style="width:132px"></div>
                             </div>
                             <div class="select_box fl" style="width:132px">
                                 <button type="button" class="btn select fl" id="<@compId>_searchBtn">조회</button>
                             </div>
                             
                         </div>
                         <div class="search_right">
                             <strong class="total">Total: <span class="pointColr" id="<@compId>_totalCnt"></span></strong>
                             <div id="<@compId>_pagingChunk" style="margin-left: 5px;width:130px"></div>
                             
                         </div>
                     </div>
                     <!-- 테이블 -->
                     <div class="tbl01 col">
                         <table>
                             <caption>표 캡션</caption>
                             <colgroup>
                                 <col style="width:50px;"/>
                                 <col style="width:150px;"/>
                                 <col style="width:120px;"/>
                                 <col style="width:*"/>
                                 <col style="width:100px;"/>
                                 <col style="width:100px;"/>
                             </colgroup>
                             <thead>
                                 <tr>
                                     <th scope="col">Num</th>
                                     <th scope="col">매장명3</th>
                                     <th scope="col">개업일</th>
                                     <th scope="col">폐정일</th>
                                     <th scope="col">주소</th>
                                     <th scope="col">가맹점주명</th>
                                 </tr>
                             </thead>
                             <tbody id="<@compId>_tableId">
                             </tbody>
                             <script type="text/x-jsrender" id="<@compId>_tableId_template">    
                                {{for list}}
                                    <tr id="trId_{{:#index}}" name="<@compId>_tr_{{:#index}}" '>
                                        <td>{{:#index + 1}}</td>
                                        <td>{{:STORE_NM3}}</td>
                                        <td>{{:OPENING_DAY}}</td>
                                        <td>{{:CLOSING_DATE}}</td>
                                        <td>{{:ADDRESS}}</td>
                                        <td>{{:STORE_MANAGER_NM}}</td>
                                    </tr>
                                {{/for}}
                            </script>
                             <script type="text/x-jsrender" id="<@compId>_tableId_noData_template">    
                               <tr>    
                                   <td colspan=6>자료가 없습니다.</td>    
                               </tr>
                            </script>
                         </table>
                     </div>
                     <!-- paging -->
                     <div class="paging" id="<@compId>_pageDiv">
                     </div>
                 </div>
             </section>
             
             <section class="sec_wrap">
                <!-- 분류별 실적 -->
                <div class="cont_box col3">
                    <h3>분류별 실적</h3>
                    <div class="box_division_wrap">
                        <div class="box_division blue">
                            <div class="row_100"><span>가맹점수<br><em>26</em></span></div>
                        </div>
                        <div class="box_division blue">
                            <div class="row_100"><span>신규가맹점수<br><em>데이타없음</em></span></div>
                        </div>
                        <div class="box_division blue">
                            <div class="row_100"><span>폐점가맹점<br><em>0</em></span></div>
                        </div>
                    </div>
                </div>

                <!-- 전체 계약 리스트 -->
                <div class="cont_box right">
                    <h3>전체 계약 리스트</h3>
                    <!-- search area -->
                    <div class="search_area">
                        <span class="tit01">조회기간</span>
                        <div class="calendar_wrap">
                            <input type="text" class="datepicker" style="width:132px">
                        </div>
                        <div class="search_right">
                            <button type="button" class="btn fl"><i class="icon_download"></i> Excel 다운로드</button>
                            <div class="select_box fl" style="width:132px">
                                <button type="button" class="btn radio"><span>50개 보기</span></button>
                                <ul class="select_lst">
                                    <li>
                                        <input name="number" id="num01" type="radio" value="">
                                        <label for="num01">50개 보기<i class="icon_check"></i></label>
                                    </li>
                                    <li>
                                        <input name="number" id="num02" type="radio" value="">
                                        <label for="num02">30개 보기<i class="icon_check"></i></label>
                                    </li>
                                    <li>
                                        <input name="number" id="num03" type="radio" value="">
                                        <label for="num03">10개 보기<i class="icon_check"></i></label>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- 테이블 -->
                    <div class="tbl01 col">
                        <table>
                            <caption>표 캡션</caption>
                            <colgroup>
                                <col style="width:40px;"/>
                                <col style="width:55px;"/>
                                <col style="width:55px;"/>
                                <col style="width:55px;"/>
                                <col style="width:55px;"/>
                                <col style="width:55px;"/>
                                <col style="width:60px;"/>
                                <col style="width:11%;"/>
                                <col style="width:11%;"/>
                                <col style="width:16%;"/>
                                <col style="width:9%;"/>
                                <col style="width:9%;"/>
                            </colgroup>
                            <thead>
                                <tr>
                                    <th scope="col"><input type="checkbox"></th>
                                    <th scope="col">년</th>
                                    <th scope="col">월</th>
                                    <th scope="col">팀</th>
                                    <th scope="col">유입<br>경로</th>
                                    <th scope="col">구분</th>
                                    <th scope="col">담당자</th>
                                    <th scope="col">사업자 등록번호</th>
                                    <th scope="col">거래처</th>
                                    <th scope="col">컨설팅명</th>
                                    <th scope="col">총 계액금액</th>
                                    <th scope="col">입금액</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><input type="checkbox"></td>
                                    <td>2023</td>
                                    <td>08월</td>
                                    <td>직할</td>
                                    <td>본사</td>
                                    <td>월납</td>
                                    <td>이주현</td>
                                    <td>235-87-01926</td>
                                    <td>(주)엠티에스<br>코퍼레이션</td>
                                    <td>프랜차이즈 판로개척<br>인턴쉽지원금</td>
                                    <td>10,000,000</td>
                                    <td>10,000,000</td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox"></td>
                                    <td>2023</td>
                                    <td>08월</td>
                                    <td>직할</td>
                                    <td>본사</td>
                                    <td>월납</td>
                                    <td>이주현</td>
                                    <td>235-87-01926</td>
                                    <td>(주)엠티에스<br>코퍼레이션</td>
                                    <td>프랜차이즈 판로개척<br>인턴쉽지원금</td>
                                    <td>10,000,000</td>
                                    <td>10,000,000</td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox"></td>
                                    <td>2023</td>
                                    <td>08월</td>
                                    <td>직할</td>
                                    <td>본사</td>
                                    <td>월납</td>
                                    <td>이주현</td>
                                    <td>235-87-01926</td>
                                    <td>(주)엠티에스<br>코퍼레이션</td>
                                    <td>프랜차이즈 판로개척<br>인턴쉽지원금</td>
                                    <td>10,000,000</td>
                                    <td>10,000,000</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- paging -->
                    <div class="paging">
                        <a href="#none" class="btn_pg_first disabled">첫번째 페이지</a>
                        <a href="#none" class="btn_pg_prev disabled">이전 페이지</a>
                        <strong title="현재 페이지">1</strong>
                        <a href="#none">2</a>
                        <a href="#none">3</a>
                        <a href="#none">4</a>
                        <a href="#none">5</a>
                        <a href="#none" class="btn_pg_next">다음 페이지</a>
                        <a href="#none" class="btn_pg_last">마지막 페이지</a>
                    </div>
                </div>
            </section>
         </div>
     </div>
 </div>
